# Окно в мир для кнопочного телефона

Это приложение написано специально для телефона с 2G интернетом
и браузером, который не умеет практически ничего. С этого самого телефона.
Также обработка некоторых тегов завязана на кривую реализацию
вышеупомянутого браузера, поэтому в нормальном браузере
сохранение сниппетов может работать некорректно.

Основная идея заключается в "сниппетах" -- кусочках кода,
которые можно вызывать с аргументами, _прямо как функции_.

Изначально существует несколько роутов:
- `/run` -- выполнение произвольного python кода
- `/code` -- возвращает код main.py, для исследования
  после изменения регулярками main.py из main.py
- `/snippets` -- редактор сниппетов, основной инструмент,
  позволяющий дополнять сайт через самого себя

В сниппетах реализованы дополнительные:
- `/bookmarks` -- список закладок, можно добавить сайт,
  чтобы потом быстро к нему перейти
- `/lofier` -- "ухудшатель" сайтов, который вырезает все теги,
  которые вызывали ошибки в том самом браузере и разбивает сайт
  на кусочки по 8 килобайт, чтобы грузилось меньше минуты
- `/vk_list_conversations` -- клиент-мессенджер для vk.com
- `/vk_api_methods` -- отображалка json схемы VK API,
  файлов этой схемы в репозитории нет, они доступны в документации VK API
- `/get_image?url=...` -- пережимает картинку по ссылке в JPEG с качеством 50%
- `/vk_feed` -- лента новостей (правда, отображает жсоны
  вместо постов, потому что недописана, но какая разница)


### Использование сниппетов

Сниппеты вызываются с помощью функции `snippet_use(snippet_name, *args)`,
алиас -- `su`. Эта функция выполняет код сниппета,
добавляя в поле имён кортеж "args" с переданными аргументами.
Если сниппет возвращает значение, должна быть объявлена переменная
`r` с результатом вызова.

При инициализации вызывается сниппет "routes",
в котором можно добавить дополнительные роуты приложения.


### Несколько скриншотов

Диалог в мессенджере:
![](https://sun9-31.userapi.com/impg/Yw4XZN61sAlsM2EeHz-Kg30DS-IaBgi-NsHVsA/3Whb_htd-PI.jpg?size=607x487&quality=96&sign=fabebf5f370ef0e9047415d269c53063&type=album)

Сайт docs.python.org, обработанный LoFier'ом:
![](https://sun9-49.userapi.com/impg/G2gC2LAmEZ3lOaD14i9NVfqrfQxUWkDruDMYfQ/qP7Ke_qsd6w.jpg?size=1613x709&quality=96&sign=87f6aa586ddeab13d49cae488a6531cb&type=album)


_Изначально это всё было написано в тетрадке и переслано SMS_
_сообщениями другу, который захостил приложение на pythonanywhere._
